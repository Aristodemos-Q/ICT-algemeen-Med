"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5745],{285:(e,t,r)=>{r.d(t,{$:()=>c});var o=r(5155),n=r(2115),s=r(9708),i=r(2085),a=r(9434);let l=(0,i.F)("inline-flex items-center justify-center rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-600 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-500",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...u}=e,d=c?s.DX:"button";return(0,o.jsx)(d,{className:(0,a.cn)(l({variant:n,size:i,className:r})),ref:t,...u})});c.displayName="Button"},1090:(e,t,r)=>{r.d(t,{AuthProvider:()=>c,A:()=>u});var o=r(5155),n=r(2115),s=r(2881),i=r(5695);async function a(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let n=1;n<=r;n++)try{return await e()}catch(e){if(t=e,console.warn("Attempt ".concat(n," failed:"),t.message),t.message.includes("Invalid login credentials")||t.message.includes("User not found")||t.message.includes("Invalid email")||t.message.includes("Signup is disabled"))throw t;if((t.message.includes("Failed to fetch")||t.message.includes("Network connection failed")||t.message.includes("timeout")||t.message.includes("Request timeout")||"TypeError"===t.name||"AbortError"===t.name)&&n<r){console.log("Retrying in ".concat(o,"ms... (").concat(n,"/").concat(r,")")),await new Promise(e=>setTimeout(e,o)),o*=1.5;continue}break}throw t}let l=(0,n.createContext)(void 0);function c(e){var t;let{children:r}=e,[c,u]=(0,n.useState)(null),[d,g]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),[f,v]=(0,n.useState)(!1),w=(0,i.useRouter)();(0,n.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:r},error:o}=await s.y.supabase.auth.getSession();if(o)console.error("Error getting session:",o),m("Failed to initialize authentication");else if(e){var t;u(null!=(t=null==r?void 0:r.user)?t:null)}}catch(t){console.error("Error initializing auth:",t),e&&m("Failed to initialize authentication")}finally{e&&(g(!1),v(!0))}})();let{data:{subscription:t}}=s.y.supabase.auth.onAuthStateChange(async(t,r)=>{var o,n;console.log("\uD83D\uDD04 Auth state change:",{event:t,hasUser:!!(null==r?void 0:r.user),userEmail:null==r||null==(o=r.user)?void 0:o.email}),e&&(u(null!=(n=null==r?void 0:r.user)?n:null),g(!1),"SIGNED_IN"===t&&(null==r?void 0:r.user)?(console.log("✅ SIGNED_IN event - checking for redirect"),setTimeout(()=>{"/login"===window.location.pathname?(console.log("\uD83C\uDFE0 No custom redirect detected, going to dashboard"),w.push("/dashboard")):console.log("✅ Custom redirect detected, staying on current page")},300)):"SIGNED_OUT"===t&&(console.log("\uD83D\uDEAA SIGNED_OUT event - redirecting to login"),w.push("/login")))});return()=>{e=!1,t.unsubscribe()}},[w]);let b={user:c,loading:d,login:async(e,t)=>{try{var r;m(null),g(!0),console.log("AuthContext login attempt:",{email:e});try{let e=await fetch("".concat("https://tuqlyoimberycjtdkivm.supabase.co","/rest/v1/"),{method:"HEAD",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI"}});console.log("Connectivity test successful:",e.status)}catch(e){throw console.error("Connectivity test failed:",e),Error("Kan geen verbinding maken met de server. Controleer je internetverbinding.")}let{data:o,error:n}=await a(async()=>await s.y.supabase.auth.signInWithPassword({email:e,password:t}),3,1e3);if(console.log("AuthContext login response:",{hasUser:!!o.user,userEmail:null==(r=o.user)?void 0:r.email,hasSession:!!o.session,errorMessage:null==n?void 0:n.message}),n){if(console.error("Login error details:",{message:n.message,status:n.status,name:n.name}),n.message.includes("Invalid login credentials"))throw Error("Ongeldige inloggegevens. Controleer je e-mailadres en wachtwoord.");if(n.message.includes("Too many requests"))throw Error("Te veel inlogpogingen. Probeer het over een paar minuten opnieuw.");if(n.message.includes("User not found"))throw Error("Geen account gevonden met dit e-mailadres. Registreer eerst een account.");else if(n.message.includes("Invalid email"))throw Error("Ongeldig e-mailadres format.");else if(n.message.includes("Signup is disabled"))throw Error("Registratie is momenteel uitgeschakeld. Neem contact op met de beheerder.");else if(n.message.includes("Failed to fetch")||n.message.includes("Network connection failed"))throw Error("Netwerkverbinding mislukt. Controleer je internetverbinding en probeer opnieuw.");else throw Error("Login fout: ".concat(n.message))}if(!o.user)throw Error("Login failed: No user data received");console.log("✅ Login successful, setting user:",o.user.email),u(o.user),console.log("⏳ Waiting for onAuthStateChange to handle redirect...")}catch(t){let e=t instanceof Error?t.message:"Login failed";throw console.error("AuthContext login error:",e),m(e),g(!1),t}},logout:async()=>{try{m(null);let{error:e}=await s.y.supabase.auth.signOut();if(e)throw e;u(null),w.push("/login")}catch(e){throw m(e instanceof Error?e.message:"Logout failed"),e}},error:h,clearError:()=>{m(null)},isAdmin:!!c&&((null==(t=c.user_metadata)?void 0:t.role)==="admin"||"qdelarambelje@gmail.com"===c.email||"admin@bvfloriande.nl"===c.email)};return(0,o.jsx)(l.Provider,{value:b,children:r})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2881:(e,t,r)=>{r.d(t,{y:()=>n});var o=r(6927);let n={supabase:o.N,async resetPassword(e){let{error:t}=await o.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)throw t;return{success:!0}},async signUp(e,t,r){if(t.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{data:n,error:s}=await o.N.auth.signUp({email:e,password:t,options:{data:r}});if(s)throw s;return{data:n,error:null}},async signIn(e,t){let{data:r,error:n}=await o.N.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r},async signOut(){let{error:e}=await o.N.auth.signOut();if(e)throw e},async getCurrentUser(){let{data:{user:e},error:t}=await o.N.auth.getUser();if(t)throw t;return e},resendConfirmation:async e=>(console.log("Email confirmation is disabled for development"),{success:!0}),async updatePassword(e){if(e.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{error:t}=await o.N.auth.updateUser({password:e});if(t)throw t;return{success:!0}}}},6927:(e,t,r)=>{r.d(t,{N:()=>a});var o=r(4982),n=r(9509);console.log("=== SUPABASE CLIENT INITIALIZATION ==="),console.log("All env vars:",Object.keys(n.env).filter(e=>e.startsWith("NEXT_PUBLIC_"))),console.log("NODE_ENV:","production");let s="https://tuqlyoimberycjtdkivm.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI";if(console.log("NEXT_PUBLIC_SUPABASE_URL:",s?"SET ("+s.substring(0,20)+"...)":"MISSING"),console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:",i?"SET ("+i.substring(0,20)+"...)":"MISSING"),!s||!i)throw console.error("Supabase environment variables are missing!"),console.error("Current environment:","production"),console.error("NEXT_PUBLIC_SUPABASE_URL:",s?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",i?"Set":"Missing"),console.error("Please check your .env.local file to ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set."),console.error("Make sure to restart your development server after adding environment variables."),Error("Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Please set them in your .env.local file and restart the server.");if(s&&!s.startsWith("http"))throw console.error("Invalid Supabase URL format!"),Error("Supabase URL must start with http:// or https://");if(i&&(!i.startsWith("ey")||2!==(i.match(/\./g)||[]).length))throw console.error("Invalid Supabase API key format!"),console.error('API key should be a JWT token (start with "ey" and contain two periods)'),Error("Invalid Supabase API key format. Please check your .env.local file.");{let e=console.log,t=console.warn;console.log=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];let n=r.join(" ");n.includes("GoTrueClient")||n.includes("#_")||e.apply(console,r)},console.warn=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];let n=r.join(" ");n.includes("GoTrueClient")||n.includes("#_")||t.apply(console,r)}}let a=(0,o.UU)(s,i,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,debug:!1},global:{headers:{"X-Client-Info":"bv-floriande-web"},fetch:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,o=setTimeout(()=>r.abort(),15e3);try{let n=await fetch(e,{...t,signal:r.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(o),n}catch(e){if(clearTimeout(o),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please check your internet connection");if(e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Network connection failed. Please check your internet connection and try again.");throw e}}},db:{schema:"public"}})},9434:(e,t,r)=>{r.d(t,{cn:()=>s});var o=r(2596),n=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,o.$)(t))}}}]);