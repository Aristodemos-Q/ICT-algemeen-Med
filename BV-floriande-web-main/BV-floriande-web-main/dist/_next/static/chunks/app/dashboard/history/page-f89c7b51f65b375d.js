(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8610],{220:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),n=r(2115),a=r(1090),o=r(6695),i=r(6126),l=r(2523),c=r(7924),d=r(9074),u=r(1007),h=r(7434),m=r(1455),g=r(6685);function f(){let{user:e}=(0,a.A)(),[t,r]=(0,n.useState)([]),[f,p]=(0,n.useState)([]),[v,y]=(0,n.useState)(!0),[x,w]=(0,n.useState)(""),[b,N]=(0,n.useState)("all");(0,n.useEffect)(()=>{j()},[]),(0,n.useEffect)(()=>{let e=t;x&&(e=e.filter(e=>e.title.toLowerCase().includes(x.toLowerCase())||e.description.toLowerCase().includes(x.toLowerCase())||e.doctor_name.toLowerCase().includes(x.toLowerCase()))),"all"!==b&&(e=e.filter(e=>e.type===b)),p(e)},[t,x,b]);let j=async()=>{try{y(!0),r([{id:"1",date:"2024-06-15",type:"consultation",title:"Algemene controle",description:"Jaarlijkse gezondheidscheck",doctor_name:"Dr. Van der Berg",location:"MedCheck+ Hoofdvestiging",diagnosis:"Algemene gezondheid goed",treatment:"Preventieve maatregelen besproken",notes:"Pati\xebnt voelt zich goed, geen klachten"},{id:"2",date:"2024-05-20",type:"treatment",title:"Behandeling hoofdpijn",description:"Follow-up voor chronische hoofdpijn",doctor_name:"Dr. Jansen",location:"MedCheck+ Hoofdvestiging",diagnosis:"Spanningshoofdpijn",treatment:"Medicatie aangepast",notes:"Verbetering na vorige behandeling"},{id:"3",date:"2024-04-10",type:"checkup",title:"Bloedonderzoek",description:"Regulier bloedonderzoek",doctor_name:"Dr. Peters",location:"Laboratorium MedCheck+",diagnosis:"Alle waarden normaal",treatment:"Geen verdere actie nodig"}])}catch(e){console.error("Error loading medical history:",e)}finally{y(!1)}},E=e=>{switch(e){case"consultation":return"bg-blue-100 text-blue-800";case"checkup":return"bg-green-100 text-green-800";case"treatment":return"bg-orange-100 text-orange-800";case"emergency":return"bg-red-100 text-red-800";case"followup":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},I=e=>{switch(e){case"consultation":return"Consult";case"checkup":return"Controle";case"treatment":return"Behandeling";case"emergency":return"Spoed";case"followup":return"Follow-up";default:return e}};return v?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Medische Geschiedenis"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Overzicht van uw eerdere consulten en behandelingen"})]})}),(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(l.p,{placeholder:"Zoek in geschiedenis...",value:x,onChange:e=>w(e.target.value),className:"pl-10"})]})}),"            ",(0,s.jsx)("div",{className:"sm:w-48",children:(0,s.jsxs)("select",{title:"Filter op type",value:b,onChange:e=>N(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[(0,s.jsx)("option",{value:"all",children:"Alle types"}),(0,s.jsx)("option",{value:"consultation",children:"Consulten"}),(0,s.jsx)("option",{value:"checkup",children:"Controles"}),(0,s.jsx)("option",{value:"treatment",children:"Behandelingen"}),(0,s.jsx)("option",{value:"emergency",children:"Spoed"}),(0,s.jsx)("option",{value:"followup",children:"Follow-up"})]})})]})})}),(0,s.jsx)("div",{className:"space-y-4",children:f.length>0?f.map(e=>(0,s.jsxs)(o.Zp,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)("div",{className:"flex justify-between items-start",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.ZB,{className:"text-lg",children:e.title}),(0,s.jsx)(i.E,{className:E(e.type),children:I(e.type)})]}),(0,s.jsxs)(o.BT,{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,m.GP)(new Date(e.date),"dd MMMM yyyy",{locale:g.nl})]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),e.doctor_name]})]})]})})}),(0,s.jsx)(o.Wu,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-gray-700",children:e.description}),e.diagnosis&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 mb-1",children:"Diagnose:"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.diagnosis})]}),e.treatment&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 mb-1",children:"Behandeling:"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.treatment})]}),e.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 mb-1",children:"Notities:"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.notes})]}),(0,s.jsx)("div",{className:"pt-2 border-t",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Locatie: ",e.location]})})]})})]},e.id)):(0,s.jsx)(o.Zp,{children:(0,s.jsxs)(o.Wu,{className:"text-center py-12",children:[(0,s.jsx)(h.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Geen geschiedenis gevonden"}),(0,s.jsx)("p",{className:"text-gray-500",children:x||"all"!==b?"Geen resultaten voor uw zoekopdracht. Probeer andere zoektermen.":"U heeft nog geen medische geschiedenis in ons systeem."})]})})})]})}},1007:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1090:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>c,A:()=>d});var s=r(5155),n=r(2115),a=r(2881),o=r(5695);async function i(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let n=1;n<=r;n++)try{return await e()}catch(e){if(t=e,console.warn("Attempt ".concat(n," failed:"),t.message),t.message.includes("Invalid login credentials")||t.message.includes("User not found")||t.message.includes("Invalid email")||t.message.includes("Signup is disabled"))throw t;if((t.message.includes("Failed to fetch")||t.message.includes("Network connection failed")||t.message.includes("timeout")||t.message.includes("Request timeout")||"TypeError"===t.name||"AbortError"===t.name)&&n<r){console.log("Retrying in ".concat(s,"ms... (").concat(n,"/").concat(r,")")),await new Promise(e=>setTimeout(e,s)),s*=1.5;continue}break}throw t}let l=(0,n.createContext)(void 0);function c(e){var t;let{children:r}=e,[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0),[m,g]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),v=(0,o.useRouter)();(0,n.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:r},error:s}=await a.y.supabase.auth.getSession();if(s)console.error("Error getting session:",s),g("Failed to initialize authentication");else if(e){var t;d(null!=(t=null==r?void 0:r.user)?t:null)}}catch(t){console.error("Error initializing auth:",t),e&&g("Failed to initialize authentication")}finally{e&&(h(!1),p(!0))}})();let{data:{subscription:t}}=a.y.supabase.auth.onAuthStateChange(async(t,r)=>{var s,n;console.log("\uD83D\uDD04 Auth state change:",{event:t,hasUser:!!(null==r?void 0:r.user),userEmail:null==r||null==(s=r.user)?void 0:s.email}),e&&(d(null!=(n=null==r?void 0:r.user)?n:null),h(!1),"SIGNED_IN"===t&&(null==r?void 0:r.user)?(console.log("✅ SIGNED_IN event - checking for redirect"),setTimeout(()=>{"/login"===window.location.pathname?(console.log("\uD83C\uDFE0 No custom redirect detected, going to dashboard"),v.push("/dashboard")):console.log("✅ Custom redirect detected, staying on current page")},300)):"SIGNED_OUT"===t&&(console.log("\uD83D\uDEAA SIGNED_OUT event - redirecting to login"),v.push("/login")))});return()=>{e=!1,t.unsubscribe()}},[v]);let y={user:c,loading:u,login:async(e,t)=>{try{var r;g(null),h(!0),console.log("AuthContext login attempt:",{email:e});try{let e=await fetch("".concat("https://tuqlyoimberycjtdkivm.supabase.co","/rest/v1/"),{method:"HEAD",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI"}});console.log("Connectivity test successful:",e.status)}catch(e){throw console.error("Connectivity test failed:",e),Error("Kan geen verbinding maken met de server. Controleer je internetverbinding.")}let{data:s,error:n}=await i(async()=>await a.y.supabase.auth.signInWithPassword({email:e,password:t}),3,1e3);if(console.log("AuthContext login response:",{hasUser:!!s.user,userEmail:null==(r=s.user)?void 0:r.email,hasSession:!!s.session,errorMessage:null==n?void 0:n.message}),n){if(console.error("Login error details:",{message:n.message,status:n.status,name:n.name}),n.message.includes("Invalid login credentials"))throw Error("Ongeldige inloggegevens. Controleer je e-mailadres en wachtwoord.");if(n.message.includes("Too many requests"))throw Error("Te veel inlogpogingen. Probeer het over een paar minuten opnieuw.");if(n.message.includes("User not found"))throw Error("Geen account gevonden met dit e-mailadres. Registreer eerst een account.");else if(n.message.includes("Invalid email"))throw Error("Ongeldig e-mailadres format.");else if(n.message.includes("Signup is disabled"))throw Error("Registratie is momenteel uitgeschakeld. Neem contact op met de beheerder.");else if(n.message.includes("Failed to fetch")||n.message.includes("Network connection failed"))throw Error("Netwerkverbinding mislukt. Controleer je internetverbinding en probeer opnieuw.");else throw Error("Login fout: ".concat(n.message))}if(!s.user)throw Error("Login failed: No user data received");console.log("✅ Login successful, setting user:",s.user.email),d(s.user),console.log("⏳ Waiting for onAuthStateChange to handle redirect...")}catch(t){let e=t instanceof Error?t.message:"Login failed";throw console.error("AuthContext login error:",e),g(e),h(!1),t}},logout:async()=>{try{g(null);let{error:e}=await a.y.supabase.auth.signOut();if(e)throw e;d(null),v.push("/login")}catch(e){throw g(e instanceof Error?e.message:"Logout failed"),e}},error:m,clearError:()=>{g(null)},isAdmin:!!c&&((null==(t=c.user_metadata)?void 0:t.role)==="admin"||"qdelarambelje@gmail.com"===c.email||"admin@bvfloriande.nl"===c.email)};return(0,s.jsx)(l.Provider,{value:y,children:r})}function d(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(5155),n=r(2115),a=r(9434);let o=n.forwardRef((e,t)=>{let{className:r,type:n,...o}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...o})});o.displayName="Input"},2881:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var s=r(6927);let n={supabase:s.N,async resetPassword(e){let{error:t}=await s.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)throw t;return{success:!0}},async signUp(e,t,r){if(t.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{data:n,error:a}=await s.N.auth.signUp({email:e,password:t,options:{data:r}});if(a)throw a;return{data:n,error:null}},async signIn(e,t){let{data:r,error:n}=await s.N.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r},async signOut(){let{error:e}=await s.N.auth.signOut();if(e)throw e},async getCurrentUser(){let{data:{user:e},error:t}=await s.N.auth.getUser();if(t)throw t;return e},resendConfirmation:async e=>(console.log("Email confirmation is disabled for development"),{success:!0}),async updatePassword(e){if(e.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{error:t}=await s.N.auth.updateUser({password:e});if(t)throw t;return{success:!0}}}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},6126:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var s=r(5155);r(2115);var n=r(2085),a=r(9434);let o=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(o({variant:r}),t),...n})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>i,wL:()=>u});var s=r(5155),n=r(2115),a=r(9434);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},6927:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var s=r(4982),n=r(9509);console.log("=== SUPABASE CLIENT INITIALIZATION ==="),console.log("All env vars:",Object.keys(n.env).filter(e=>e.startsWith("NEXT_PUBLIC_"))),console.log("NODE_ENV:","production");let a="https://tuqlyoimberycjtdkivm.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI";if(console.log("NEXT_PUBLIC_SUPABASE_URL:",a?"SET ("+a.substring(0,20)+"...)":"MISSING"),console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:",o?"SET ("+o.substring(0,20)+"...)":"MISSING"),!a||!o)throw console.error("Supabase environment variables are missing!"),console.error("Current environment:","production"),console.error("NEXT_PUBLIC_SUPABASE_URL:",a?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",o?"Set":"Missing"),console.error("Please check your .env.local file to ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set."),console.error("Make sure to restart your development server after adding environment variables."),Error("Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Please set them in your .env.local file and restart the server.");if(a&&!a.startsWith("http"))throw console.error("Invalid Supabase URL format!"),Error("Supabase URL must start with http:// or https://");if(o&&(!o.startsWith("ey")||2!==(o.match(/\./g)||[]).length))throw console.error("Invalid Supabase API key format!"),console.error('API key should be a JWT token (start with "ey" and contain two periods)'),Error("Invalid Supabase API key format. Please check your .env.local file.");{let e=console.log,t=console.warn;console.log=function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];let n=r.join(" ");n.includes("GoTrueClient")||n.includes("#_")||e.apply(console,r)},console.warn=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];let n=r.join(" ");n.includes("GoTrueClient")||n.includes("#_")||t.apply(console,r)}}let i=(0,s.UU)(a,o,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,debug:!1},global:{headers:{"X-Client-Info":"bv-floriande-web"},fetch:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,s=setTimeout(()=>r.abort(),15e3);try{let n=await fetch(e,{...t,signal:r.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(s),n}catch(e){if(clearTimeout(s),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please check your internet connection");if(e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Network connection failed. Please check your internet connection and try again.");throw e}}},db:{schema:"public"}})},7434:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7924:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9074:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9338:(e,t,r)=>{Promise.resolve().then(r.bind(r,220))},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(2596),n=r(9688);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[1778,4982,3439,8441,1684,7358],()=>t(9338)),_N_E=e.O()}]);