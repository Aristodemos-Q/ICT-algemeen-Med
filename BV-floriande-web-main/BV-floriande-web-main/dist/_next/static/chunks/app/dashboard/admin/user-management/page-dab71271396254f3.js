(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5339,5745],{110:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),s=r(2115),n=r(6695),i=r(285),o=r(6126),l=r(5525),c=r(7580),d=r(1243),u=r(9946);let m=(0,u.A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),h=(0,u.A)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var g=r(1007),f=r(1090),p=r(7530);function v(){var e;let{user:t}=(0,f.A)(),[r,u]=(0,s.useState)([]),[v,y]=(0,s.useState)(!0),[x,w]=(0,s.useState)(null),[N,b]=(0,s.useState)(null),j=(null==t||null==(e=t.user_metadata)?void 0:e.role)==="admin"||(null==t?void 0:t.email)==="qdelarambelje@gmail.com"||(null==t?void 0:t.email)==="admin@bvfloriande.nl";(0,s.useEffect)(()=>{j&&_()},[j]);let _=async()=>{try{y(!0);let e=await p.Z.getUsersWithRoles();u(e)}catch(e){console.error("Error loading users:",e),w("Er is een fout opgetreden bij het laden van gebruikers.")}finally{y(!1)}},E=async(e,t)=>{if(confirm("Weet je zeker dat je ".concat(t," wilt promoveren tot admin?")))try{b(e),await p.Z.promoteUserToAdmin(e),await _(),w(null)}catch(e){console.error("Error promoting user:",e),w(e.message||"Er is een fout opgetreden bij het promoveren van de gebruiker.")}finally{b(null)}},A=async(e,t)=>{if(confirm("Weet je zeker dat je ".concat(t," wilt degraderen naar trainer? Deze actie kan niet ongedaan worden gemaakt.")))try{b(e),await p.Z.demoteAdminToTrainer(e),await _(),w(null)}catch(e){console.error("Error demoting user:",e),w(e.message||"Er is een fout opgetreden bij het degraderen van de gebruiker.")}finally{b(null)}};if(!j)return(0,a.jsx)("div",{className:"container mx-auto p-4",children:(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 mx-auto text-red-500 mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Toegang Geweigerd"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Je hebt geen beheerrechten om deze pagina te bekijken."})]})})})});let k=r.filter(e=>"admin"===e.role),I=r.filter(e=>"trainer"===e.role);return(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"Gebruikersbeheer"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Beheer gebruikersrollen en machtigingen"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.E,{variant:"outline",className:"text-sm",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 mr-1"}),r.length," totaal"]}),(0,a.jsxs)(o.E,{variant:"destructive",className:"text-sm",children:[(0,a.jsx)(l.A,{className:"h-3 w-3 mr-1"}),k.length," admins"]})]})]}),x&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),x]})}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-5 w-5 text-yellow-500"}),"Beheerders (",k.length,")"]}),(0,a.jsx)(n.BT,{children:"Gebruikers met volledige toegang tot het systeem"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[k.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-yellow-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(m,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.email}),(0,a.jsxs)(o.E,{variant:"secondary",children:[(0,a.jsx)(l.A,{className:"h-3 w-3 mr-1"}),"Admin"]}),e.id===(null==t?void 0:t.id)&&(0,a.jsx)(o.E,{variant:"outline",children:"Jij"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Lid sinds: ",new Date(e.created_at).toLocaleDateString(),e.last_sign_in_at&&(0,a.jsxs)("span",{className:"ml-4",children:["Laatst ingelogd: ",new Date(e.last_sign_in_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[e.id!==(null==t?void 0:t.id)&&(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>A(e.id,e.name),disabled:N===e.id,className:"text-orange-600 hover:text-orange-700",children:N===e.id?"Bezig...":"Degraderen naar Trainer"}),e.id===(null==t?void 0:t.id)&&(0,a.jsx)(o.E,{variant:"outline",className:"text-xs",children:"Je kunt jezelf niet degraderen"})]})]})},e.id)),0===k.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Geen beheerders gevonden"})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h,{className:"h-5 w-5 text-blue-500"}),"Trainers (",I.length,")"]}),(0,a.jsx)(n.BT,{children:"Gebruikers met trainer toegang"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[I.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.email}),(0,a.jsxs)(o.E,{variant:"default",children:[(0,a.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Trainer"]}),(0,a.jsx)(o.E,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Actief":"inactive"===e.status?"Inactief":"Geschorst"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Lid sinds: ",new Date(e.created_at).toLocaleDateString(),e.last_sign_in_at&&(0,a.jsxs)("span",{className:"ml-4",children:["Laatst ingelogd: ",new Date(e.last_sign_in_at).toLocaleDateString()]})]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>E(e.id,e.name),disabled:N===e.id,className:"text-green-600 hover:text-green-700",children:N===e.id?"Bezig...":"Promoveren tot Admin"})})]})},e.id)),0===I.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Geen trainers gevonden"})]})})]})]}),(0,a.jsx)(n.Zp,{className:"mt-6 border-yellow-200 bg-yellow-50",children:(0,a.jsx)(n.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-yellow-800 mb-1",children:"Belangrijk!"}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:["• Er moet altijd minimaal \xe9\xe9n admin zijn",(0,a.jsx)("br",{}),"• Je kunt jezelf niet degraderen van admin",(0,a.jsx)("br",{}),"• Admin promoties en degradaties zijn onomkeerbaar zonder hulp van een andere admin"]})]})]})})})]})}},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155),s=r(2115),n=r(9708),i=r(2085),o=r(9434);let l=(0,i.F)("inline-flex items-center justify-center rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-600 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-500",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},1007:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1090:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>c,A:()=>d});var a=r(5155),s=r(2115),n=r(2881),i=r(5695);async function o(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let s=1;s<=r;s++)try{return await e()}catch(e){if(t=e,console.warn("Attempt ".concat(s," failed:"),t.message),t.message.includes("Invalid login credentials")||t.message.includes("User not found")||t.message.includes("Invalid email")||t.message.includes("Signup is disabled"))throw t;if((t.message.includes("Failed to fetch")||t.message.includes("Network connection failed")||t.message.includes("timeout")||t.message.includes("Request timeout")||"TypeError"===t.name||"AbortError"===t.name)&&s<r){console.log("Retrying in ".concat(a,"ms... (").concat(s,"/").concat(r,")")),await new Promise(e=>setTimeout(e,a)),a*=1.5;continue}break}throw t}let l=(0,s.createContext)(void 0);function c(e){var t;let{children:r}=e,[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[f,p]=(0,s.useState)(!1),v=(0,i.useRouter)();(0,s.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:r},error:a}=await n.y.supabase.auth.getSession();if(a)console.error("Error getting session:",a),g("Failed to initialize authentication");else if(e){var t;d(null!=(t=null==r?void 0:r.user)?t:null)}}catch(t){console.error("Error initializing auth:",t),e&&g("Failed to initialize authentication")}finally{e&&(m(!1),p(!0))}})();let{data:{subscription:t}}=n.y.supabase.auth.onAuthStateChange(async(t,r)=>{var a,s;console.log("\uD83D\uDD04 Auth state change:",{event:t,hasUser:!!(null==r?void 0:r.user),userEmail:null==r||null==(a=r.user)?void 0:a.email}),e&&(d(null!=(s=null==r?void 0:r.user)?s:null),m(!1),"SIGNED_IN"===t&&(null==r?void 0:r.user)?(console.log("✅ SIGNED_IN event - checking for redirect"),setTimeout(()=>{"/login"===window.location.pathname?(console.log("\uD83C\uDFE0 No custom redirect detected, going to dashboard"),v.push("/dashboard")):console.log("✅ Custom redirect detected, staying on current page")},300)):"SIGNED_OUT"===t&&(console.log("\uD83D\uDEAA SIGNED_OUT event - redirecting to login"),v.push("/login")))});return()=>{e=!1,t.unsubscribe()}},[v]);let y={user:c,loading:u,login:async(e,t)=>{try{var r;g(null),m(!0),console.log("AuthContext login attempt:",{email:e});try{let e=await fetch("".concat("https://tuqlyoimberycjtdkivm.supabase.co","/rest/v1/"),{method:"HEAD",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI"}});console.log("Connectivity test successful:",e.status)}catch(e){throw console.error("Connectivity test failed:",e),Error("Kan geen verbinding maken met de server. Controleer je internetverbinding.")}let{data:a,error:s}=await o(async()=>await n.y.supabase.auth.signInWithPassword({email:e,password:t}),3,1e3);if(console.log("AuthContext login response:",{hasUser:!!a.user,userEmail:null==(r=a.user)?void 0:r.email,hasSession:!!a.session,errorMessage:null==s?void 0:s.message}),s){if(console.error("Login error details:",{message:s.message,status:s.status,name:s.name}),s.message.includes("Invalid login credentials"))throw Error("Ongeldige inloggegevens. Controleer je e-mailadres en wachtwoord.");if(s.message.includes("Too many requests"))throw Error("Te veel inlogpogingen. Probeer het over een paar minuten opnieuw.");if(s.message.includes("User not found"))throw Error("Geen account gevonden met dit e-mailadres. Registreer eerst een account.");else if(s.message.includes("Invalid email"))throw Error("Ongeldig e-mailadres format.");else if(s.message.includes("Signup is disabled"))throw Error("Registratie is momenteel uitgeschakeld. Neem contact op met de beheerder.");else if(s.message.includes("Failed to fetch")||s.message.includes("Network connection failed"))throw Error("Netwerkverbinding mislukt. Controleer je internetverbinding en probeer opnieuw.");else throw Error("Login fout: ".concat(s.message))}if(!a.user)throw Error("Login failed: No user data received");console.log("✅ Login successful, setting user:",a.user.email),d(a.user),console.log("⏳ Waiting for onAuthStateChange to handle redirect...")}catch(t){let e=t instanceof Error?t.message:"Login failed";throw console.error("AuthContext login error:",e),g(e),m(!1),t}},logout:async()=>{try{g(null);let{error:e}=await n.y.supabase.auth.signOut();if(e)throw e;d(null),v.push("/login")}catch(e){throw g(e instanceof Error?e.message:"Logout failed"),e}},error:h,clearError:()=>{g(null)},isAdmin:!!c&&((null==(t=c.user_metadata)?void 0:t.role)==="admin"||"qdelarambelje@gmail.com"===c.email||"admin@bvfloriande.nl"===c.email)};return(0,a.jsx)(l.Provider,{value:y,children:r})}function d(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1243:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2881:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var a=r(6927);let s={supabase:a.N,async resetPassword(e){let{error:t}=await a.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)throw t;return{success:!0}},async signUp(e,t,r){if(t.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{data:s,error:n}=await a.N.auth.signUp({email:e,password:t,options:{data:r}});if(n)throw n;return{data:s,error:null}},async signIn(e,t){let{data:r,error:s}=await a.N.auth.signInWithPassword({email:e,password:t});if(s)throw s;return r},async signOut(){let{error:e}=await a.N.auth.signOut();if(e)throw e},async getCurrentUser(){let{data:{user:e},error:t}=await a.N.auth.getUser();if(t)throw t;return e},resendConfirmation:async e=>(console.log("Email confirmation is disabled for development"),{success:!0}),async updatePassword(e){if(e.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{error:t}=await a.N.auth.updateUser({password:e});if(t)throw t;return{success:!0}}}},4086:(e,t,r)=>{Promise.resolve().then(r.bind(r,110))},5525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},6101:(e,t,r)=>{"use strict";r.d(t,{s:()=>i,t:()=>n});var a=r(2115);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let r=!1,a=e.map(e=>{let a=s(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():s(e[t],null)}}}}function i(...e){return a.useCallback(n(...e),e)}},6126:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var a=r(5155);r(2115);var s=r(2085),n=r(9434);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var a=r(5155),s=r(2115),n=r(9434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},6927:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var a=r(4982),s=r(9509);console.log("=== SUPABASE CLIENT INITIALIZATION ==="),console.log("All env vars:",Object.keys(s.env).filter(e=>e.startsWith("NEXT_PUBLIC_"))),console.log("NODE_ENV:","production");let n="https://tuqlyoimberycjtdkivm.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI";if(console.log("NEXT_PUBLIC_SUPABASE_URL:",n?"SET ("+n.substring(0,20)+"...)":"MISSING"),console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:",i?"SET ("+i.substring(0,20)+"...)":"MISSING"),!n||!i)throw console.error("Supabase environment variables are missing!"),console.error("Current environment:","production"),console.error("NEXT_PUBLIC_SUPABASE_URL:",n?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",i?"Set":"Missing"),console.error("Please check your .env.local file to ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set."),console.error("Make sure to restart your development server after adding environment variables."),Error("Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Please set them in your .env.local file and restart the server.");if(n&&!n.startsWith("http"))throw console.error("Invalid Supabase URL format!"),Error("Supabase URL must start with http:// or https://");if(i&&(!i.startsWith("ey")||2!==(i.match(/\./g)||[]).length))throw console.error("Invalid Supabase API key format!"),console.error('API key should be a JWT token (start with "ey" and contain two periods)'),Error("Invalid Supabase API key format. Please check your .env.local file.");{let e=console.log,t=console.warn;console.log=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];let s=r.join(" ");s.includes("GoTrueClient")||s.includes("#_")||e.apply(console,r)},console.warn=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];let s=r.join(" ");s.includes("GoTrueClient")||s.includes("#_")||t.apply(console,r)}}let o=(0,a.UU)(n,i,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,debug:!1},global:{headers:{"X-Client-Info":"bv-floriande-web"},fetch:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,a=setTimeout(()=>r.abort(),15e3);try{let s=await fetch(e,{...t,signal:r.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(a),s}catch(e){if(clearTimeout(a),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please check your internet connection");if(e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Network connection failed. Please check your internet connection and try again.");throw e}}},db:{schema:"public"}})},7530:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,Z:()=>s});var a=r(6927);let s={async getApprovedEmails(){let{data:e,error:t}=await a.N.from("approved_emails").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async addApprovedEmail(e,t,r){var s;let{data:n,error:i}=await a.N.from("approved_emails").insert({email:e,role:t,notes:r,approved_by:null==(s=(await a.N.auth.getUser()).data.user)?void 0:s.id}).select().single();if(i)throw i;return n},async removeApprovedEmail(e){let{error:t}=await a.N.from("approved_emails").delete().eq("id",e);if(t)throw t},async updateApprovedEmail(e,t){let{data:r,error:s}=await a.N.from("approved_emails").update(t).eq("id",e).select().single();if(s)throw s;return r},async getRegistrationRequests(){let{data:e,error:t}=await a.N.from("registration_requests").select("*").order("requested_at",{ascending:!1});if(t)throw t;return e||[]},async getPendingRegistrationRequests(){let{data:e,error:t}=await a.N.from("registration_requests").select("*").eq("status","pending").order("requested_at",{ascending:!1});if(t)throw t;return e||[]},async reviewRegistrationRequest(e,t,r){let{data:s,error:n}=await a.N.rpc("review_registration_request",{request_id:e,approval_status:t,admin_notes:r});if(n)throw n;return s},async updateUserStatus(e,t){let{error:r}=await a.N.from("users").update({status:t}).eq("id",e);if(r)throw r},async getAllUsers(){let{data:e,error:t}=await a.N.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getUsersWithRoles(){let{data:e,error:t}=await a.N.rpc("get_users_with_roles");if(t)throw t;return e||[]},async promoteUserToAdmin(e){let{error:t}=await a.N.rpc("promote_user_to_admin",{target_user_id:e});if(t)throw t},async demoteAdminToTrainer(e){let{error:t}=await a.N.rpc("demote_admin_to_trainer",{target_user_id:e});if(t)throw t},async hasAnyAdmin(){let{data:e,error:t}=await a.N.rpc("has_any_admin");if(t)throw t;return e},async setupInitialAdmin(e){let{error:t}=await a.N.rpc("setup_initial_admin",{user_email:e});if(t)throw t},async isEmailApproved(e){let{data:t,error:r}=await a.N.rpc("is_email_approved",{check_email:e});if(r)throw r;return t}},n={async submitRequest(e,t,r){let{data:s,error:n}=await a.N.rpc("submit_registration_request",{request_email:e,request_name:t,request_message:r});if(n)throw n;return s},async checkEmailApproval(e){let{data:t,error:r}=await a.N.rpc("is_email_approved",{check_email:e});if(r)throw r;return t}}},7580:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},9708:(e,t,r)=>{"use strict";r.d(t,{DX:()=>o,TL:()=>i});var a=r(2115),s=r(6101),n=r(5155);function i(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){var i;let e,o,l=(i=r,(o=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let r={...t};for(let a in t){let s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...n}:"className"===a&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,s.t)(t,l):l),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:s,...i}=e,o=a.Children.toArray(s),l=o.find(c);if(l){let e=l.props.children,s=o.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...i,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,n.jsx)(t,{...i,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var o=i("Slot"),l=Symbol("radix.slottable");function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}}},e=>{var t=t=>e(e.s=t);e.O(0,[1778,4982,8441,1684,7358],()=>t(4086)),_N_E=e.O()}]);