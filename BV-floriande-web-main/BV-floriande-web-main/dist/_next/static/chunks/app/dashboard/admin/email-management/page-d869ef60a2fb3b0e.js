(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1461,3374,5745],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(5155),a=r(2115),n=r(9708),i=r(2085),l=r(9434);let o=(0,i.F)("inline-flex items-center justify-center rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-600 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-500",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},736:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(5155),a=r(2115),n=r(6695),i=r(285),l=r(2523),o=r(5057),d=r(8539),c=r(9409),u=r(7313),m=r(6126),f=r(5525),g=r(4616),h=r(8883),p=r(1007),v=r(2525),x=r(4186),y=r(5196),w=r(4416),b=r(1090),N=r(7530);function j(){var e;let{user:t}=(0,b.A)(),[r,j]=(0,a.useState)([]),[A,E]=(0,a.useState)([]),[_,k]=(0,a.useState)(!0),[I,C]=(0,a.useState)(null),[S,R]=(0,a.useState)(""),[U,T]=(0,a.useState)("trainer"),[P,z]=(0,a.useState)(""),q=(null==t||null==(e=t.user_metadata)?void 0:e.role)==="admin";(0,a.useEffect)(()=>{q&&B()},[q]);let B=async()=>{try{k(!0);let[e,t]=await Promise.all([N.Z.getApprovedEmails(),N.Z.getRegistrationRequests()]);j(e),E(t)}catch(e){console.error("Error loading data:",e),C("Er is een fout opgetreden bij het laden van de gegevens.")}finally{k(!1)}},L=async()=>{if(S.trim())try{await N.Z.addApprovedEmail(S.trim(),U,P.trim()||void 0),R(""),z(""),await B()}catch(e){console.error("Error adding email:",e),C("Er is een fout opgetreden bij het toevoegen van de e-mail.")}},W=async e=>{if(confirm("Weet je zeker dat je deze goedgekeurde e-mail wilt verwijderen?"))try{await N.Z.removeApprovedEmail(e),await B()}catch(e){console.error("Error removing email:",e),C("Er is een fout opgetreden bij het verwijderen van de e-mail.")}},M=async(e,t,r)=>{try{await N.Z.reviewRegistrationRequest(e,t,r),await B()}catch(e){console.error("Error reviewing request:",e),C("Er is een fout opgetreden bij het beoordelen van het verzoek.")}};if(!q)return(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(f.A,{className:"h-12 w-12 mx-auto text-red-500 mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Toegang Geweigerd"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Je hebt geen beheerrechten om deze pagina te bekijken."})]})})})});let O=A.filter(e=>"pending"===e.status);return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"E-mail Goedkeuring Beheer"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Beheer wie zich kan registreren op het platform"})]}),O.length>0&&(0,s.jsxs)(m.E,{variant:"destructive",className:"text-sm",children:[O.length," nieuwe verzoeken"]})]}),I&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:I}),(0,s.jsxs)(u.tU,{defaultValue:"approved",className:"space-y-6",children:[(0,s.jsxs)(u.j7,{children:[(0,s.jsx)(u.Xi,{value:"approved",children:"Goedgekeurde E-mails"}),(0,s.jsxs)(u.Xi,{value:"requests",className:"relative",children:["Registratie Verzoeken",O.length>0&&(0,s.jsx)(m.E,{variant:"destructive",className:"ml-2 text-xs",children:O.length})]})]}),(0,s.jsx)(u.av,{value:"approved",children:(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-5 w-5"}),"Nieuwe E-mail Goedkeuren"]}),(0,s.jsx)(n.BT,{children:"Voeg een e-mailadres toe dat zich direct kan registreren"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)(o.J,{htmlFor:"email",children:"E-mailadres"}),(0,s.jsx)(l.p,{id:"email",type:"email",value:S,onChange:e=>R(e.target.value),placeholder:"naam@bvfloriande.nl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"role",children:"Rol"}),(0,s.jsxs)(c.l6,{value:U,onValueChange:e=>T(e),children:[(0,s.jsx)(c.bq,{children:(0,s.jsx)(c.yv,{})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"trainer",children:"Trainer"}),(0,s.jsx)(c.eb,{value:"admin",children:"Admin"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"add-btn",className:"invisible",children:"Actie"}),(0,s.jsxs)(i.$,{onClick:L,className:"w-full",disabled:!S.trim(),children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Toevoegen"]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(o.J,{htmlFor:"notes",children:"Notities (optioneel)"}),(0,s.jsx)(d.T,{id:"notes",value:P,onChange:e=>z(e.target.value),placeholder:"Bijv: Nieuwe trainer voor groep X",rows:2})]})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{children:["Goedgekeurde E-mailadressen (",r.length,")"]}),(0,s.jsx)(n.BT,{children:"Deze e-mailadressen kunnen zich direct registreren"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[r.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"font-medium",children:e.email}),(0,s.jsx)(m.E,{variant:"admin"===e.role?"destructive":"default",children:"admin"===e.role?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Admin"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Trainer"]})})]}),e.notes&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.notes}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Goedgekeurd op: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>W(e.id),className:"text-red-600 hover:text-red-700",children:(0,s.jsx)(v.A,{className:"h-3 w-3"})})]})},e.id)),0===r.length&&(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nog geen goedgekeurde e-mailadressen"})]})})]})]})}),(0,s.jsx)(u.av,{value:"requests",children:(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Registratie Verzoeken"}),(0,s.jsx)(n.BT,{children:"Beoordeel verzoeken van mensen die zich willen registreren"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[A.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"font-medium",children:e.email}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.name,")"]}),(0,s.jsxs)(m.E,{variant:"pending"===e.status?"secondary":"approved"===e.status?"default":"destructive",children:["pending"===e.status&&(0,s.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"approved"===e.status&&(0,s.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"rejected"===e.status&&(0,s.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"pending"===e.status?"In afwachting":"approved"===e.status?"Goedgekeurd":"Afgewezen"]})]}),e.message&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,s.jsx)("strong",{children:"Bericht:"})," ",e.message]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Aangevraagd op: ",new Date(e.requested_at).toLocaleDateString()]}),e.reviewed_at&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Beoordeeld op: ",new Date(e.reviewed_at).toLocaleDateString(),e.review_notes&&" - ".concat(e.review_notes)]})]}),"pending"===e.status&&(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,s.jsxs)(i.$,{size:"sm",onClick:()=>M(e.id,"approved","Goedgekeurd door admin"),className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Goedkeuren"]}),(0,s.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>M(e.id,"rejected","Afgewezen door admin"),className:"text-red-600 hover:text-red-700",children:[(0,s.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"Afwijzen"]})]})]})},e.id)),0===A.length&&(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nog geen registratie verzoeken ontvangen"})]})})]})})]})]})}},803:(e,t,r)=>{Promise.resolve().then(r.bind(r,736))},1007:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1090:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>d,A:()=>c});var s=r(5155),a=r(2115),n=r(2881),i=r(5695);async function l(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let a=1;a<=r;a++)try{return await e()}catch(e){if(t=e,console.warn("Attempt ".concat(a," failed:"),t.message),t.message.includes("Invalid login credentials")||t.message.includes("User not found")||t.message.includes("Invalid email")||t.message.includes("Signup is disabled"))throw t;if((t.message.includes("Failed to fetch")||t.message.includes("Network connection failed")||t.message.includes("timeout")||t.message.includes("Request timeout")||"TypeError"===t.name||"AbortError"===t.name)&&a<r){console.log("Retrying in ".concat(s,"ms... (").concat(a,"/").concat(r,")")),await new Promise(e=>setTimeout(e,s)),s*=1.5;continue}break}throw t}let o=(0,a.createContext)(void 0);function d(e){var t;let{children:r}=e,[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),v=(0,i.useRouter)();(0,a.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:r},error:s}=await n.y.supabase.auth.getSession();if(s)console.error("Error getting session:",s),g("Failed to initialize authentication");else if(e){var t;c(null!=(t=null==r?void 0:r.user)?t:null)}}catch(t){console.error("Error initializing auth:",t),e&&g("Failed to initialize authentication")}finally{e&&(m(!1),p(!0))}})();let{data:{subscription:t}}=n.y.supabase.auth.onAuthStateChange(async(t,r)=>{var s,a;console.log("\uD83D\uDD04 Auth state change:",{event:t,hasUser:!!(null==r?void 0:r.user),userEmail:null==r||null==(s=r.user)?void 0:s.email}),e&&(c(null!=(a=null==r?void 0:r.user)?a:null),m(!1),"SIGNED_IN"===t&&(null==r?void 0:r.user)?(console.log("✅ SIGNED_IN event - checking for redirect"),setTimeout(()=>{"/login"===window.location.pathname?(console.log("\uD83C\uDFE0 No custom redirect detected, going to dashboard"),v.push("/dashboard")):console.log("✅ Custom redirect detected, staying on current page")},300)):"SIGNED_OUT"===t&&(console.log("\uD83D\uDEAA SIGNED_OUT event - redirecting to login"),v.push("/login")))});return()=>{e=!1,t.unsubscribe()}},[v]);let x={user:d,loading:u,login:async(e,t)=>{try{var r;g(null),m(!0),console.log("AuthContext login attempt:",{email:e});try{let e=await fetch("".concat("https://tuqlyoimberycjtdkivm.supabase.co","/rest/v1/"),{method:"HEAD",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI"}});console.log("Connectivity test successful:",e.status)}catch(e){throw console.error("Connectivity test failed:",e),Error("Kan geen verbinding maken met de server. Controleer je internetverbinding.")}let{data:s,error:a}=await l(async()=>await n.y.supabase.auth.signInWithPassword({email:e,password:t}),3,1e3);if(console.log("AuthContext login response:",{hasUser:!!s.user,userEmail:null==(r=s.user)?void 0:r.email,hasSession:!!s.session,errorMessage:null==a?void 0:a.message}),a){if(console.error("Login error details:",{message:a.message,status:a.status,name:a.name}),a.message.includes("Invalid login credentials"))throw Error("Ongeldige inloggegevens. Controleer je e-mailadres en wachtwoord.");if(a.message.includes("Too many requests"))throw Error("Te veel inlogpogingen. Probeer het over een paar minuten opnieuw.");if(a.message.includes("User not found"))throw Error("Geen account gevonden met dit e-mailadres. Registreer eerst een account.");else if(a.message.includes("Invalid email"))throw Error("Ongeldig e-mailadres format.");else if(a.message.includes("Signup is disabled"))throw Error("Registratie is momenteel uitgeschakeld. Neem contact op met de beheerder.");else if(a.message.includes("Failed to fetch")||a.message.includes("Network connection failed"))throw Error("Netwerkverbinding mislukt. Controleer je internetverbinding en probeer opnieuw.");else throw Error("Login fout: ".concat(a.message))}if(!s.user)throw Error("Login failed: No user data received");console.log("✅ Login successful, setting user:",s.user.email),c(s.user),console.log("⏳ Waiting for onAuthStateChange to handle redirect...")}catch(t){let e=t instanceof Error?t.message:"Login failed";throw console.error("AuthContext login error:",e),g(e),m(!1),t}},logout:async()=>{try{g(null);let{error:e}=await n.y.supabase.auth.signOut();if(e)throw e;c(null),v.push("/login")}catch(e){throw g(e instanceof Error?e.message:"Logout failed"),e}},error:f,clearError:()=>{g(null)},isAdmin:!!d&&((null==(t=d.user_metadata)?void 0:t.role)==="admin"||"qdelarambelje@gmail.com"===d.email||"admin@bvfloriande.nl"===d.email)};return(0,s.jsx)(o.Provider,{value:x,children:r})}function c(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2881:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var s=r(6927);let a={supabase:s.N,async resetPassword(e){let{error:t}=await s.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)throw t;return{success:!0}},async signUp(e,t,r){if(t.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{data:a,error:n}=await s.N.auth.signUp({email:e,password:t,options:{data:r}});if(n)throw n;return{data:a,error:null}},async signIn(e,t){let{data:r,error:a}=await s.N.auth.signInWithPassword({email:e,password:t});if(a)throw a;return r},async signOut(){let{error:e}=await s.N.auth.signOut();if(e)throw e},async getCurrentUser(){let{data:{user:e},error:t}=await s.N.auth.getUser();if(t)throw t;return e},resendConfirmation:async e=>(console.log("Email confirmation is disabled for development"),{success:!0}),async updatePassword(e){if(e.length<8)throw Error("Wachtwoord moet minimaal 8 tekens lang zijn");let{error:t}=await s.N.auth.updateUser({password:e});if(t)throw t;return{success:!0}}}},4186:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5057:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var s=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("label",{ref:t,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...a})});i.displayName="Label"},5525:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6101:(e,t,r)=>{"use strict";r.d(t,{s:()=>i,t:()=>n});var s=r(2115);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let r=!1,s=e.map(e=>{let s=a(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():a(e[t],null)}}}}function i(...e){return s.useCallback(n(...e),e)}},6126:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(5155);r(2115);var a=r(2085),n=r(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var s=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},6927:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var s=r(4982),a=r(9509);console.log("=== SUPABASE CLIENT INITIALIZATION ==="),console.log("All env vars:",Object.keys(a.env).filter(e=>e.startsWith("NEXT_PUBLIC_"))),console.log("NODE_ENV:","production");let n="https://tuqlyoimberycjtdkivm.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI";if(console.log("NEXT_PUBLIC_SUPABASE_URL:",n?"SET ("+n.substring(0,20)+"...)":"MISSING"),console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:",i?"SET ("+i.substring(0,20)+"...)":"MISSING"),!n||!i)throw console.error("Supabase environment variables are missing!"),console.error("Current environment:","production"),console.error("NEXT_PUBLIC_SUPABASE_URL:",n?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",i?"Set":"Missing"),console.error("Please check your .env.local file to ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set."),console.error("Make sure to restart your development server after adding environment variables."),Error("Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Please set them in your .env.local file and restart the server.");if(n&&!n.startsWith("http"))throw console.error("Invalid Supabase URL format!"),Error("Supabase URL must start with http:// or https://");if(i&&(!i.startsWith("ey")||2!==(i.match(/\./g)||[]).length))throw console.error("Invalid Supabase API key format!"),console.error('API key should be a JWT token (start with "ey" and contain two periods)'),Error("Invalid Supabase API key format. Please check your .env.local file.");{let e=console.log,t=console.warn;console.log=function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];let a=r.join(" ");a.includes("GoTrueClient")||a.includes("#_")||e.apply(console,r)},console.warn=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];let a=r.join(" ");a.includes("GoTrueClient")||a.includes("#_")||t.apply(console,r)}}let l=(0,s.UU)(n,i,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,debug:!1},global:{headers:{"X-Client-Info":"bv-floriande-web"},fetch:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,s=setTimeout(()=>r.abort(),15e3);try{let a=await fetch(e,{...t,signal:r.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(s),a}catch(e){if(clearTimeout(s),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please check your internet connection");if(e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Network connection failed. Please check your internet connection and try again.");throw e}}},db:{schema:"public"}})},7313:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var s=r(5155),a=r(2115),n=r(704),i=r(9434);let l=n.bL,o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.B8,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...a})});o.displayName=n.B8.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...a})});d.displayName=n.l9.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});c.displayName=n.UC.displayName},7530:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,Z:()=>a});var s=r(6927);let a={async getApprovedEmails(){let{data:e,error:t}=await s.N.from("approved_emails").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async addApprovedEmail(e,t,r){var a;let{data:n,error:i}=await s.N.from("approved_emails").insert({email:e,role:t,notes:r,approved_by:null==(a=(await s.N.auth.getUser()).data.user)?void 0:a.id}).select().single();if(i)throw i;return n},async removeApprovedEmail(e){let{error:t}=await s.N.from("approved_emails").delete().eq("id",e);if(t)throw t},async updateApprovedEmail(e,t){let{data:r,error:a}=await s.N.from("approved_emails").update(t).eq("id",e).select().single();if(a)throw a;return r},async getRegistrationRequests(){let{data:e,error:t}=await s.N.from("registration_requests").select("*").order("requested_at",{ascending:!1});if(t)throw t;return e||[]},async getPendingRegistrationRequests(){let{data:e,error:t}=await s.N.from("registration_requests").select("*").eq("status","pending").order("requested_at",{ascending:!1});if(t)throw t;return e||[]},async reviewRegistrationRequest(e,t,r){let{data:a,error:n}=await s.N.rpc("review_registration_request",{request_id:e,approval_status:t,admin_notes:r});if(n)throw n;return a},async updateUserStatus(e,t){let{error:r}=await s.N.from("users").update({status:t}).eq("id",e);if(r)throw r},async getAllUsers(){let{data:e,error:t}=await s.N.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getUsersWithRoles(){let{data:e,error:t}=await s.N.rpc("get_users_with_roles");if(t)throw t;return e||[]},async promoteUserToAdmin(e){let{error:t}=await s.N.rpc("promote_user_to_admin",{target_user_id:e});if(t)throw t},async demoteAdminToTrainer(e){let{error:t}=await s.N.rpc("demote_admin_to_trainer",{target_user_id:e});if(t)throw t},async hasAnyAdmin(){let{data:e,error:t}=await s.N.rpc("has_any_admin");if(t)throw t;return e},async setupInitialAdmin(e){let{error:t}=await s.N.rpc("setup_initial_admin",{user_email:e});if(t)throw t},async isEmailApproved(e){let{data:t,error:r}=await s.N.rpc("is_email_approved",{check_email:e});if(r)throw r;return t}},n={async submitRequest(e,t,r){let{data:a,error:n}=await s.N.rpc("submit_registration_request",{request_email:e,request_name:t,request_message:r});if(n)throw n;return a},async checkEmailApproval(e){let{data:t,error:r}=await s.N.rpc("is_email_approved",{check_email:e});if(r)throw r;return t}}},8539:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var s=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});i.displayName="Textarea"},8883:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9409:(e,t,r)=>{"use strict";r.d(t,{bq:()=>m,eb:()=>p,gC:()=>h,l6:()=>c,yv:()=>u});var s=r(5155),a=r(2115),n=r(8715),i=r(6474),l=r(7863),o=r(5196),d=r(9434);let c=n.bL;n.YJ;let u=n.WT,m=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});g.displayName=n.wn.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...l}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,s.jsx)(f,{}),(0,s.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(g,{})]})})});h.displayName=n.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=n.JU.displayName;let p=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:a})]})});p.displayName=n.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=n.wv.displayName},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9708:(e,t,r)=>{"use strict";r.d(t,{DX:()=>l,TL:()=>i});var s=r(2115),a=r(6101),n=r(5155);function i(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...n}=e;if(s.isValidElement(r)){var i;let e,l,o=(i=r,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),d=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==s.Fragment&&(d.ref=t?(0,a.t)(t,o):o),s.cloneElement(r,d)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=s.forwardRef((e,r)=>{let{children:a,...i}=e,l=s.Children.toArray(a),o=l.find(d);if(o){let e=o.props.children,a=l.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...i,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,n.jsx)(t,{...i,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}var l=i("Slot"),o=Symbol("radix.slottable");function d(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}}},e=>{var t=t=>e(e.s=t);e.O(0,[1778,4982,3942,5900,322,2374,8441,1684,7358],()=>t(803)),_N_E=e.O()}]);