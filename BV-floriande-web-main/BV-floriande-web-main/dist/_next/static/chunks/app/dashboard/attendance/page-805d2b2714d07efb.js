(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6437],{2203:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(5155),a=t(2115),n=t(5495),l=t(6874),d=t.n(l),i=t(285),c=t(7550);function o(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[o,u]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),[g,m]=(0,a.useState)([]),[p,b]=(0,a.useState)({}),[v,j]=(0,a.useState)(!0),[f,y]=(0,a.useState)(null),[N,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{j(!0);let e=await n.H6.getAllGroups();l(e)}catch(e){console.error("Error loading groups:",e),y("Er is een fout opgetreden bij het laden van de groepen.")}finally{j(!1)}})()},[]),(0,a.useEffect)(()=>{(async()=>{if(o)try{j(!0);let e=await n.mB.getSessionsByGroup(o.id);s(e);let t=await n.H6.getGroupMembers(o.id);m(t),h(null)}catch(e){console.error("Error loading group data:",e),y("Er is een fout opgetreden bij het laden van de groepsgegevens.")}finally{j(!1)}})()},[o]),(0,a.useEffect)(()=>{(async()=>{if(x)try{j(!0);let e=await n.v5.getAttendanceBySession(x.id),s={};e.forEach(e=>{s[e.member_id]={status:e.present?"present":"absent",notes:""}}),b(s)}catch(e){console.error("Error loading attendance data:",e),y("Er is een fout opgetreden bij het laden van de aanwezigheidsgegevens.")}finally{j(!1)}})()},[x]);let S=(e,s)=>{b(t=>{var r;return{...t,[e]:{status:s,notes:(null==(r=t[e])?void 0:r.notes)||""}}})},E=(e,s)=>{b(t=>{var r;return{...t,[e]:{status:(null==(r=t[e])?void 0:r.status)||"present",notes:s}}})},k=async()=>{if(x)try{j(!0),y(null);let e=Object.entries(p).map(e=>{let[s,t]=e;return{memberId:s,status:t.status,note:t.notes}});await n.v5.recordBulkAttendance(x.id,e,"mock-user-id"),w("Aanwezigheid succesvol opgeslagen."),setTimeout(()=>{w(null)},3e3)}catch(e){console.error("Error saving attendance:",e),y("Er is een fout opgetreden bij het opslaan van de aanwezigheidsgegevens.")}finally{j(!1)}},A=e=>{switch(e){case"present":return"bg-green-500";case"absent":return"bg-red-500";case"late":return"bg-yellow-500";case"excused":return"bg-blue-500";default:return"bg-gray-500"}};return(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d(),{href:"/dashboard/trainer-dashboard",children:(0,r.jsxs)(i.$,{variant:"ghost",size:"sm",className:"hover:bg-primary/5",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Terug naar Dashboard"]})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"Aanwezigheid Registreren"})]})}),f&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),N&&(0,r.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:N}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"1. Selecteer een groep"}),(0,r.jsxs)("div",{className:"space-y-2",children:[t.map(e=>(0,r.jsxs)("div",{onClick:()=>u(e),className:"p-3 border rounded cursor-pointer ".concat((null==o?void 0:o.id)===e.id?"bg-blue-100 border-blue-500":""),children:["                ",(0,r.jsx)("div",{className:"font-medium",children:e.name}),e.level&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Niveau: ",e.level]})]},e.id)),0===t.length&&!v&&(0,r.jsx)("p",{className:"text-gray-500",children:"Geen groepen gevonden."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"2. Selecteer een trainingsessie"}),o?(0,r.jsxs)("div",{className:"space-y-2",children:[e.map(e=>(0,r.jsxs)("div",{onClick:()=>h(e),className:"p-3 border rounded cursor-pointer transition-colors ".concat((null==x?void 0:x.id)===e.id?"bg-blue-100 border-blue-500":"hover:bg-gray-50"),children:[(0,r.jsx)("div",{className:"font-medium",children:e.title||"Sessie ".concat(new Date(e.date).toLocaleDateString())}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:["Datum: ",new Date(e.date).toLocaleDateString("nl-NL")]}),e.start_time&&(0,r.jsxs)("div",{children:["Tijd: ",e.start_time]}),e.duration&&(0,r.jsxs)("div",{children:["Duur: ",e.duration," minuten"]}),e.location&&(0,r.jsxs)("div",{children:["Locatie: ",e.location]})]})]},e.id)),0===e.length&&!v&&(0,r.jsx)("p",{className:"text-gray-500",children:"Geen trainingsessies gevonden voor deze groep."})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"Selecteer eerst een groep."})]})]}),o&&x&&(0,r.jsxs)(r.Fragment,{children:["          ",(0,r.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold",children:["Aanwezigheid voor sessie van ",new Date(x.date).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{let e={};g.forEach(s=>{var t;e[s.id]={status:"present",notes:(null==(t=p[s.id])?void 0:t.notes)||""}}),b(e)},className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 text-sm",children:"Allen aanwezig"}),(0,r.jsx)("button",{onClick:()=>{let e={};g.forEach(s=>{var t;e[s.id]={status:"absent",notes:(null==(t=p[s.id])?void 0:t.notes)||""}}),b(e)},className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 text-sm",children:"Allen afwezig"}),(0,r.jsx)("button",{onClick:k,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",disabled:v,children:"Opslaan"})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"py-2 px-4 border text-left",children:"Naam"}),(0,r.jsx)("th",{className:"py-2 px-4 border text-left",children:"Status"}),(0,r.jsx)("th",{className:"py-2 px-4 border text-left",children:"Opmerking"})]})}),(0,r.jsxs)("tbody",{children:[g.map(e=>{var s,t,a,n,l;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border",children:e.name}),(0,r.jsx)("td",{className:"py-2 px-4 border",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[["present","absent","late","excused"].map(s=>{var t;return(0,r.jsx)("button",{onClick:()=>S(e.id,s),className:"w-6 h-6 rounded-full ".concat((null==(t=p[e.id])?void 0:t.status)===s?A(s):"bg-gray-200"),title:s.charAt(0).toUpperCase()+s.slice(1)},s)}),(0,r.jsxs)("div",{className:"ml-2 text-sm",children:[(null==(s=p[e.id])?void 0:s.status)==="present"&&"Aanwezig",(null==(t=p[e.id])?void 0:t.status)==="absent"&&"Afwezig",(null==(a=p[e.id])?void 0:a.status)==="late"&&"Te laat",(null==(n=p[e.id])?void 0:n.status)==="excused"&&"Afgemeld"]})]})}),(0,r.jsx)("td",{className:"py-2 px-4 border",children:(0,r.jsx)("input",{type:"text",value:(null==(l=p[e.id])?void 0:l.notes)||"",onChange:s=>E(e.id,s.target.value),className:"w-full p-1 border rounded",placeholder:"Opmerking..."})})]},e.id)}),0===g.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"py-4 px-4 border text-center text-gray-500",children:"Geen leden gevonden in deze groep."})})]})]})})]})]})}},2851:(e,s,t)=>{Promise.resolve().then(t.bind(t,2203))},7550:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[1778,4982,9037,360,8441,1684,7358],()=>s(2851)),_N_E=e.O()}]);