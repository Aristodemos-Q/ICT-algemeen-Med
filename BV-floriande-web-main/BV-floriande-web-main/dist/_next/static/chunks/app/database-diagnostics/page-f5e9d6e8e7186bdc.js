(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4867],{2795:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(5155),l=r(2115),n=r(6927),a=r(2669);let i=e=>{let{message:s,type:r,duration:n=5e3,onClose:a}=e,[i,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=setTimeout(()=>{o(!1),a&&a()},n);return()=>clearTimeout(e)},[n,a]),i)?(0,t.jsx)("div",{className:"fixed bottom-4 right-4 z-50 max-w-md p-4 border rounded-lg shadow-lg transform transition-all duration-300 ".concat((()=>{switch(r){case"success":return"bg-green-50 text-green-800 border-green-200";case"warning":return"bg-amber-50 text-amber-800 border-amber-200";case"error":return"bg-red-50 text-red-800 border-red-200";default:return"bg-blue-50 text-blue-800 border-blue-200"}})()),children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mr-3",children:(()=>{switch(r){case"success":return(0,t.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"warning":return(0,t.jsx)("svg",{className:"w-5 h-5 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"error":return(0,t.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});default:return(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1v-3a1 1 0 00-1-1z",clipRule:"evenodd"})})}})()}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-sm",children:s})}),(0,t.jsx)("button",{onClick:()=>{o(!1),a&&a()},className:"ml-4 text-gray-400 hover:text-gray-600","aria-label":"Sluiten",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}):null},o=0;function c(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,l=o++,n="".concat("notification-portal-").concat(l),c=document.getElementById(n);c||((c=document.createElement("div")).id=n,document.body.appendChild(c));let d=(0,a.createRoot)(c);return d.render((0,t.jsx)(i,{message:e,type:s,duration:r,onClose:()=>{d.unmount(),null==c||c.remove()}})),l}function d(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7e3;return c(e,s,r)}function u(){let[e,s]=(0,l.useState)({ping:!1,serviceStatus:!1,execSql:!1,tables:!1}),[r,a]=(0,l.useState)(!1),[i,o]=(0,l.useState)(null);async function u(){a(!0),o(null);let e={ping:!1,serviceStatus:!1,execSql:!1,tables:!1};try{var r;e.ping=!(await n.N.rpc("ping")).error;let t=await n.N.rpc("get_service_status");e.serviceStatus=!t.error&&(null==(r=t.data)?void 0:r.status);let l=await n.N.rpc("exec_sql",{sql:"SELECT 1"});e.execSql=!l.error,l.error&&o("exec_sql error: ".concat(l.error.message)),e.tables=!(await n.N.from("users").select("count(*)").limit(1)).error,s(e),Object.values(e).every(e=>e)?c("All database diagnostic tests passed successfully!","success"):d("Some database tests failed. See details below.","warning")}catch(e){o("Unexpected error: ".concat(e.message)),d("Error running diagnostics","error")}finally{a(!1)}}return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Database Diagnostics"}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("button",{onClick:u,disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded disabled:opacity-50",children:r?"Running Tests...":"Run Database Diagnostics"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"border rounded-md p-4 bg-white",children:[(0,t.jsx)("h2",{className:"font-semibold mb-2",children:"Connection Tests"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-5 h-5 inline-flex items-center justify-center rounded-full mr-2 ".concat(e.ping?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.ping?"✓":"•"}),"Database Ping Function"]}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-5 h-5 inline-flex items-center justify-center rounded-full mr-2 ".concat(e.serviceStatus?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.serviceStatus?"✓":"•"}),"Service Status Function"]})]})]}),(0,t.jsxs)("div",{className:"border rounded-md p-4 bg-white",children:[(0,t.jsx)("h2",{className:"font-semibold mb-2",children:"Schema Tests"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-5 h-5 inline-flex items-center justify-center rounded-full mr-2 ".concat(e.execSql?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:e.execSql?"✓":"✗"}),(0,t.jsx)("span",{className:e.execSql?"":"font-semibold text-red-600",children:"exec_sql Function Available"})]}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-5 h-5 inline-flex items-center justify-center rounded-full mr-2 ".concat(e.tables?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.tables?"✓":"•"}),"Users Table Exists"]})]})]})]}),i&&(0,t.jsxs)("div",{className:"mb-6 p-4 border border-red-200 bg-red-50 rounded-md",children:[(0,t.jsx)("h3",{className:"font-semibold text-red-700 mb-1",children:"Error Details"}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm bg-white p-2 rounded border border-red-100",children:i})]}),function(){if(!1===e.execSql){let e=i&&i.includes("Permission denied");return(0,t.jsxs)("div",{className:"mt-4 bg-amber-50 border border-amber-200 p-4 rounded-md",children:[(0,t.jsx)("h3",{className:"text-amber-800 font-bold mb-2",children:e?"How to Fix exec_sql Function Permissions":"How to Fix exec_sql Function"}),e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mb-2",children:"The exec_sql function exists but you don't have permission to use it."}),(0,t.jsx)("p",{className:"font-bold",children:"For Local Development:"}),(0,t.jsxs)("ol",{className:"list-decimal ml-6 mb-3",children:[(0,t.jsxs)("li",{children:["Run ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"apply-migration.bat"})," file"]}),(0,t.jsxs)("li",{children:["This will apply the permission fix in ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"20250522_fix_exec_sql_permissions.sql"})]}),(0,t.jsx)("li",{children:"Restart your application"})]}),(0,t.jsx)("p",{className:"font-bold",children:"For Remote/Production:"}),(0,t.jsxs)("ol",{className:"list-decimal ml-6",children:[(0,t.jsx)("li",{children:"Go to Supabase SQL Editor"}),(0,t.jsxs)("li",{children:["Run the migration file: ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"supabase/migrations/20250522_fix_exec_sql_permissions.sql"})]}),(0,t.jsx)("li",{children:"Restart your application"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mb-2",children:"The exec_sql function is required for database setup operations."}),(0,t.jsx)("p",{className:"font-bold",children:"For Local Development:"}),(0,t.jsxs)("ol",{className:"list-decimal ml-6 mb-3",children:[(0,t.jsxs)("li",{children:["Run ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"apply-migration.bat"})," file"]}),(0,t.jsx)("li",{children:"Restart your application"})]}),(0,t.jsx)("p",{className:"font-bold",children:"For Remote/Production:"}),(0,t.jsxs)("ol",{className:"list-decimal ml-6",children:[(0,t.jsx)("li",{children:"Go to Supabase SQL Editor"}),(0,t.jsxs)("li",{children:["Run the migration file: ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"supabase/migrations/20250521_add_exec_sql_function.sql"})]}),(0,t.jsx)("li",{children:"Restart your application"})]})]}),(0,t.jsx)("p",{className:"mt-2",children:(0,t.jsx)("a",{href:"/DATABASE-SETUP-FIX.md",target:"_blank",className:"text-blue-600 hover:text-blue-800",children:"View detailed documentation"})})]})}return null}(),(0,t.jsx)("div",{className:"mt-6 text-sm text-gray-500",children:(0,t.jsx)("p",{children:"These diagnostics check your database connection and required functions. If you encounter issues, please refer to the project documentation or contact support."})})]})}},3324:(e,s,r)=>{Promise.resolve().then(r.bind(r,2795))},6927:(e,s,r)=>{"use strict";r.d(s,{N:()=>i});var t=r(4982),l=r(9509);console.log("=== SUPABASE CLIENT INITIALIZATION ==="),console.log("All env vars:",Object.keys(l.env).filter(e=>e.startsWith("NEXT_PUBLIC_"))),console.log("NODE_ENV:","production");let n="https://tuqlyoimberycjtdkivm.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI";if(console.log("NEXT_PUBLIC_SUPABASE_URL:",n?"SET ("+n.substring(0,20)+"...)":"MISSING"),console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:",a?"SET ("+a.substring(0,20)+"...)":"MISSING"),!n||!a)throw console.error("Supabase environment variables are missing!"),console.error("Current environment:","production"),console.error("NEXT_PUBLIC_SUPABASE_URL:",n?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",a?"Set":"Missing"),console.error("Please check your .env.local file to ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set."),console.error("Make sure to restart your development server after adding environment variables."),Error("Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Please set them in your .env.local file and restart the server.");if(n&&!n.startsWith("http"))throw console.error("Invalid Supabase URL format!"),Error("Supabase URL must start with http:// or https://");if(a&&(!a.startsWith("ey")||2!==(a.match(/\./g)||[]).length))throw console.error("Invalid Supabase API key format!"),console.error('API key should be a JWT token (start with "ey" and contain two periods)'),Error("Invalid Supabase API key format. Please check your .env.local file.");{let e=console.log,s=console.warn;console.log=function(){for(var s=arguments.length,r=Array(s),t=0;t<s;t++)r[t]=arguments[t];let l=r.join(" ");l.includes("GoTrueClient")||l.includes("#_")||e.apply(console,r)},console.warn=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];let l=r.join(" ");l.includes("GoTrueClient")||l.includes("#_")||s.apply(console,r)}}let i=(0,t.UU)(n,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,debug:!1},global:{headers:{"X-Client-Info":"bv-floriande-web"},fetch:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,t=setTimeout(()=>r.abort(),15e3);try{let l=await fetch(e,{...s,signal:r.signal,headers:{"Content-Type":"application/json",...s.headers}});return clearTimeout(t),l}catch(e){if(clearTimeout(t),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please check your internet connection");if(e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Network connection failed. Please check your internet connection and try again.");throw e}}},db:{schema:"public"}})}},e=>{var s=s=>e(e.s=s);e.O(0,[4982,8441,1684,7358],()=>s(3324)),_N_E=e.O()}]);