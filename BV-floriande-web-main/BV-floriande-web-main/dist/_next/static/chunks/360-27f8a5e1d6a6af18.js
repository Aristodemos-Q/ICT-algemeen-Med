"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{285:(e,r,n)=>{n.d(r,{$:()=>c});var t=n(5155),o=n(2115),i=n(9708),a=n(2085),s=n(9434);let l=(0,a.F)("inline-flex items-center justify-center rounded-lg text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-600 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-500",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:n,variant:o,size:a,asChild:c=!1,...d}=e,u=c?i.DX:"button";return(0,t.jsx)(u,{className:(0,s.cn)(l({variant:o,size:a,className:n})),ref:r,...d})});c.displayName="Button"},5495:(e,r,n)=>{n.d(r,{Dv:()=>a,H6:()=>s,Ny:()=>m,QW:()=>c,mB:()=>l,v5:()=>d});var t=n(6927);n(9509);let o=async()=>{if(!t.N)throw console.error("❌ Supabase client is not initialized"),Error("Supabase client is not initialized");if(!t.N.from||!t.N.auth)throw console.error("❌ Supabase client is not properly configured"),Error("Supabase client is not properly configured");try{let{data:{session:e},error:r}=await t.N.auth.getSession();if(r)throw console.error("❌ Authentication session error:",r),Error("Authentication error. Please log in again.");if(!e||!e.access_token)throw Error("You must be logged in to perform this action. Please log in again.");return{isValid:!0,session:e}}catch(e){throw console.error("❌ Error checking authentication:",e),Error("Authentication check failed. Please log in again.")}},i=(e,r)=>{var n,t;let o=(null==e?void 0:e.message)||(null==e?void 0:e.details)||"Er is een onbekende databasefout opgetreden";if((null==e||null==(n=e.message)?void 0:n.includes("No API key found"))||(null==e||null==(t=e.message)?void 0:t.includes("Invalid API key")))throw console.error("\uD83D\uDD11 SUPABASE CONFIGURATION ERROR:",{message:e.message,hint:"Check your .env.local file and restart the development server",envCheck:{url:"SET",key:"SET"}}),Error("Database configuration error. Please check your environment variables and restart the server.");throw console.error("".concat(r||"Database error",":"),{message:null==e?void 0:e.message,details:null==e?void 0:e.details,hint:null==e?void 0:e.hint,code:null==e?void 0:e.code,error:e}),Error("".concat(r||o))},a={async getAllUsers(){let{data:e,error:r}=await t.N.from("users").select("*");return r&&i(r,"Fout bij het ophalen van gebruikers"),e||[]},async getUserById(e){let{data:r,error:n}=await t.N.from("users").select("*").eq("id",e).single();return n&&i(n,"Fout bij het ophalen van gebruiker"),r},async createUser(e){let{data:r,error:n}=await t.N.from("users").insert([e]).select().single();return n&&i(n,"Fout bij het aanmaken van gebruiker"),r},async updateUser(e,r){let{data:n,error:o}=await t.N.from("users").update({...r,updated_at:new Date().toISOString()}).eq("id",e).select().single();return o&&i(o,"Fout bij het bijwerken van gebruiker"),n},async getAllTrainers(){var e,r;try{console.log("getAllTrainers: Fetching all trainers...");let{data:r,error:n}=await t.N.from("users").select("*").eq("role","trainer");if(n){if(console.error("Error fetching trainers:",{message:n.message||"No error message",details:n.details||"No error details",hint:n.hint||"No error hint",code:n.code||"No error code",error:n}),(null==(e=n.message)?void 0:e.includes("infinite recursion"))||"42P17"===n.code)return console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion detected in trainers query!"),console.error("\uD83D\uDCCB SOLUTION: Apply the RLS fix from RLS-FIX-MANUAL-INSTRUCTIONS.md"),console.error("\uD83D\uDD17 Go to: https://supabase.com/dashboard/project/cumsctqzjowisphyhnfj → SQL Editor"),console.error("⚠️  Returning empty trainers array to prevent app crash"),[];return console.error("❌ Non-recursion database error occurred in trainers"),[]}return console.log("✅ Successfully fetched ".concat((null==r?void 0:r.length)||0," trainers")),r||[]}catch(e){if(console.error("Exception in getAllTrainers:",{error:e,errorMessage:e instanceof Error?e.message:"Unknown error",errorStack:e instanceof Error?e.stack:void 0,errorType:typeof e}),e instanceof Error&&(null==(r=e.message)?void 0:r.includes("infinite recursion")))return console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion exception detected in trainers!"),console.error("\uD83D\uDCCB NEXT STEPS:"),console.error("  1. Go to Supabase Dashboard: https://supabase.com/dashboard/project/cumsctqzjowisphyhnfj"),console.error("  2. Open SQL Editor"),console.error("  3. Apply the fix from RLS-FIX-MANUAL-INSTRUCTIONS.md"),console.error("⚠️  Returning empty trainers array to prevent app crash"),[];return console.error("❌ Exception occurred in trainers, returning empty array"),[]}}},s={async getAllGroups(){var e,r,n;try{console.log("getAllGroups: Fetching all groups..."),await o();let{data:n,error:i}=await t.N.from("groups").select("*").order("created_at",{ascending:!1});if(i){if(console.error("Error fetching groups:",{message:i.message||"No error message",details:i.details||"No error details",hint:i.hint||"No error hint",code:i.code||"No error code",errorStringified:JSON.stringify(i,null,2)}),null==(e=i.message)?void 0:e.includes("No API key found"))return console.error("\uD83D\uDD11 API KEY ERROR: Supabase API key is missing or invalid"),console.error("\uD83D\uDCA1 SOLUTION: Check your .env.local file and restart the development server"),[];if((null==(r=i.message)?void 0:r.includes("infinite recursion"))||"42P17"===i.code)return console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion detected in groups table!"),console.error("\uD83D\uDCCB SOLUTION: Apply the RLS fix from RLS-FIX-MANUAL-INSTRUCTIONS.md"),console.error("\uD83D\uDD17 Go to: https://supabase.com/dashboard/project/cumsctqzjowisphyhnfj → SQL Editor"),console.error("⚠️  Returning empty groups array to prevent app crash"),[];return console.error("❌ Database error in getAllGroups: ".concat(i.message||"Unknown error")),[]}return console.log("✅ Successfully fetched ".concat((null==n?void 0:n.length)||0," groups")),n||[]}catch(e){if(console.error("Exception in getAllGroups:",{error:e,errorMessage:e instanceof Error?e.message:"Unknown error",errorStack:e instanceof Error?e.stack:void 0,errorType:typeof e}),e instanceof Error&&(null==(n=e.message)?void 0:n.includes("infinite recursion")))return console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion exception detected in groups!"),console.error("\uD83D\uDCCB NEXT STEPS:"),console.error("  1. Go to Supabase Dashboard: https://supabase.com/dashboard/project/cumsctqzjowisphyhnfj"),console.error("  2. Open SQL Editor"),console.error("  3. Apply the fix from RLS-FIX-MANUAL-INSTRUCTIONS.md"),console.error("⚠️  Returning empty groups array to prevent app crash"),[];return console.error("❌ Exception occurred, returning empty groups array"),[]}},async getGroupById(e){let{data:r,error:n}=await t.N.from("groups").select("*").eq("id",e).single();return n&&i(n,"Fout bij het ophalen van groep"),r},async createGroup(e){var r,n,i,a;try{console.log("createGroup: Creating new group:",{name:e.name,created_by:e.created_by}),await o();let{data:{session:a},error:s}=await t.N.auth.getSession();if(s)throw console.error("❌ Authentication session error:",s),Error("Authentication error. Please log in again.");if(!a)throw console.error("❌ No active session found"),Error("You must be logged in to create a group. Please log in again.");e.created_by!==a.user.id&&(e.created_by=a.user.id);let l={name:e.name,description:e.description||null,created_by:e.created_by,level:e.level||null,age_category:e.age_category||null,max_members:null!=(r=e.max_members)?r:15},{data:c,error:d}=await t.N.from("groups").insert([l]).select().single();if(d){if(null==(n=d.message)?void 0:n.includes("No API key found"))throw Error("Database configuration error. Please refresh the page and try again.");if((null==(i=d.message)?void 0:i.includes("infinite recursion"))||"42P17"===d.code)throw Error("Database configuration error. Please contact system administrator.");throw Error(d.message||"Er is een fout opgetreden bij het aanmaken van de groep")}return c}catch(r){if(console.error("Exception in createGroup:",{error:r,errorMessage:r instanceof Error?r.message:"Unknown error",errorStack:r instanceof Error?r.stack:void 0,errorType:typeof r,groupData:e}),r instanceof Error&&(null==(a=r.message)?void 0:a.includes("infinite recursion")))throw console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion exception detected in group creation!"),console.error("\uD83D\uDCCB NEXT STEPS:"),console.error("  1. Go to Supabase Dashboard: https://supabase.com/dashboard/project/cumsctqzjowisphyhnfj"),console.error("  2. Open SQL Editor"),console.error("  3. Apply the fix from RLS-FIX-MANUAL-INSTRUCTIONS.md"),Error("Database configuration error. Please contact system administrator.");throw r}},async getGroupMembers(e){let{data:r,error:n}=await t.N.from("group_members").select("\n        members (*)\n      ").eq("group_id",e);return n&&i(n,"Fout bij het ophalen van groepsleden"),((null==r?void 0:r.map(e=>e.members).filter(Boolean))||[]).map(e=>{let r={};try{r=e.contact_info?JSON.parse(e.contact_info):{}}catch(n){console.warn("Failed to parse contact_info for group member:",e.id,n),r={}}return{...e,email:r.email,phone:r.phone,emergency_contact:r.emergency_contact,medical_info:r.medical_info}})},async createMember(e){let{data:r,error:n}=await t.N.from("members").insert([e]).select().single();return n&&i(n,"Fout bij het aanmaken van lid"),r},async addMemberToGroup(e,r){let{error:n}=await t.N.from("group_members").insert([{member_id:e,group_id:r,joined_at:new Date().toISOString()}]);n&&i(n,"Fout bij het toevoegen van lid aan groep")},async removeMemberFromGroup(e,r){let{error:n}=await t.N.from("group_members").delete().match({member_id:e,group_id:r});n&&i(n,"Fout bij het verwijderen van lid uit groep")},async assignTrainerToGroup(e,r,n){let{data:o,error:a}=await t.N.from("users").select("role").eq("id",r).single();if(a&&i(a,"Fout bij het ophalen van gebruikersrol"),!o||!["trainer","admin"].includes(o.role))throw Error("Alleen trainers en admins kunnen aan groepen worden toegewezen");let{error:s}=await t.N.from("group_trainers").insert([{group_id:e,trainer_id:r,assigned_by:n}]);s&&i(s,"Fout bij het toewijzen van trainer aan groep")},async removeTrainerFromGroup(e,r){let{error:n}=await t.N.from("group_trainers").delete().eq("group_id",e).eq("trainer_id",r);n&&i(n,"Fout bij het verwijderen van trainer uit groep")},async getGroupTrainers(e){let{data:r,error:n}=await t.N.from("group_trainers").select("\n        *,\n        trainer:users!group_trainers_trainer_id_fkey(*),\n        assigned_by_user:users!group_trainers_assigned_by_fkey(*)\n      ").eq("group_id",e);return n&&i(n,"Fout bij het ophalen van groepstrainers"),r||[]},async getTrainerGroups(e){var r,n;try{if(console.log("getTrainerGroups: Fetching groups for trainer:",e),await o(),!e||"string"!=typeof e)return console.error("Invalid trainer ID provided:",e),[];if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e))return console.error("Trainer ID is not a valid UUID format:",e),[];let{data:n,error:i}=await t.N.from("group_trainers").select("\n          group:group_id(\n            id,\n            name,\n            description,\n            level,\n            age_category,\n            max_members,\n            created_by,\n            created_at,\n            updated_at\n          )\n        ").eq("trainer_id",e);if(i)return console.error("Error fetching trainer groups:",{message:i.message||"No error message",details:i.details||"No error details",hint:i.hint||"No error hint",code:i.code||"No error code",trainerId:e,fullError:i,errorStringified:JSON.stringify(i,null,2)}),((null==(r=i.message)?void 0:r.includes("infinite recursion"))||"42P17"===i.code)&&(console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion detected in group_trainers query!"),console.error("\uD83D\uDCCB SOLUTION: Apply the RLS fix from RLS-FIX-MANUAL-INSTRUCTIONS.md")),[];if(!n||!Array.isArray(n))return console.warn("No data returned from group_trainers query or invalid data format:",n),[];let a=n.map(e=>e.group).filter(Boolean).map(e=>{var r,n,t,o,i,a,s;return{id:e.id||"",name:e.name||"",description:null!=(r=e.description)?r:"",level:null!=(n=e.level)?n:"",age_category:null!=(t=e.age_category)?t:"",max_members:null!=(o=e.max_members)?o:0,created_by:null!=(i=e.created_by)?i:"",created_at:null!=(a=e.created_at)?a:"",updated_at:null!=(s=e.updated_at)?s:""}});return console.log("✅ Successfully fetched ".concat(a.length," groups for trainer ").concat(e)),a}catch(r){return console.error("Exception in getTrainerGroups:",{error:r,errorMessage:r instanceof Error?r.message:String(r),errorStack:r instanceof Error?r.stack:void 0,errorType:typeof r,trainerId:e,errorStringified:JSON.stringify(r,null,2)}),r instanceof Error&&(null==(n=r.message)?void 0:n.includes("infinite recursion"))&&console.error("\uD83D\uDD25 CRITICAL: RLS infinite recursion exception detected in trainer groups!"),[]}},async getGroupAttendance(e){let{data:r,error:n}=await t.N.from("attendance").select("\n        *,\n        sessions (\n          start_time,\n          end_time\n        )\n      ").eq("group_id",e);return n&&i(n,"Fout bij het ophalen van aanwezigheidsgeschiedenis voor groep"),r||[]},async getGroupExercises(e){let{data:r,error:n}=await t.N.from("group_exercises").select("\n        exercises (\n          id,\n          name,\n          description,\n          category,\n          difficulty_level\n        )\n      ").eq("group_id",e);return n&&i(n,"Fout bij het ophalen van oefeningen voor groep"),(null==r?void 0:r.map(e=>{var r,n,t;let o=Array.isArray(e.exercises)?e.exercises[0]:e.exercises;return{id:o.id,name:o.name,description:null!=(r=o.description)?r:"",category:null!=(n=o.category)?n:"",difficulty_level:null!=(t=o.difficulty_level)?t:1,created_at:""}}).filter(Boolean))||[]},async evaluateGroup(e,r){let{data:n,error:o}=await t.N.from("group_evaluations").insert([{group_id:e,...r}]).select().single();return o&&i(o,"Fout bij het indienen van groepsevaluatie"),n},async getGroupEvaluation(e){let{data:r,error:n}=await t.N.from("group_evaluations").select("*").eq("group_id",e).single();return n&&i(n,"Fout bij het ophalen van groepsevaluatie"),r},async getGroupProgress(e){let{data:r,error:n}=await t.N.from("group_progress").select("\n        session_id,\n        exercise_id,\n        sets,\n        reps,\n        duration_minutes,\n        notes,\n        completed_at\n      ").eq("group_id",e);return n&&i(n,"Fout bij het ophalen van groepsvoortgang"),r||[]},async getGroupSummary(e){var r;let{data:n,error:o}=await t.N.from("group_difficulty_summary").select("\n        difficulty_level,\n        count(*) as exercise_count,\n        avg(duration_minutes) as avg_duration\n      ").eq("group_id",e);return o&&i(o,"Fout bij het ophalen van groepssamenvatting"),!Array.isArray(n)||n.length&&(null==(r=n[0])||r.error),[]},async recommendExercisesToGroup(e){try{if(console.log("recommendExercisesToGroup: Fetching exercises for group:",e),await o(),!e||"string"!=typeof e)return console.error("Invalid group ID provided:",e),[];let{data:r,error:n}=await t.N.from("recommended_exercises").select("\n          exercises (\n            id,\n            name,\n            description,\n            category,\n            difficulty_level\n          ),\n          similarity_score\n        ").eq("group_id",e);if(n)return console.error("Error fetching recommended exercises:",{message:n.message||"No error message",details:n.details||"No error details",hint:n.hint||"No error hint",code:n.code||"No error code",groupId:e,fullError:n,errorStringified:JSON.stringify(n,null,2)}),[];if(!r||!Array.isArray(r))return console.warn("No data returned from recommended_exercises query or invalid data format:",r),[];let i=r.map(e=>{let r=Array.isArray(e.exercises)?e.exercises[0]:e.exercises;return r&&r.id&&r.name?{exercise_id:r.id,exercise_name:r.name,similarity_score:"number"==typeof e.similarity_score?e.similarity_score:0}:(console.warn("Skipping invalid exercise data:",r),null)}).filter(e=>null!==e);return console.log("✅ Successfully fetched ".concat(i.length," recommended exercises for group ").concat(e)),i}catch(r){return console.error("Exception in recommendExercisesToGroup:",{error:r,errorMessage:r instanceof Error?r.message:String(r),errorStack:r instanceof Error?r.stack:void 0,errorType:typeof r,groupId:e,errorStringified:JSON.stringify(r,null,2)}),[]}},async getAllGroupPendingExercises(){let{data:e,error:r}=await t.N.from("group_pending_exercises").select("\n        *,\n        exercises (\n          id,\n          name,\n          description,\n          category,\n          difficulty_level\n        )\n      ");return r&&i(r,"Fout bij het ophalen van wachtende groeps oefeningen"),(null==e?void 0:e.map(e=>({...e,exercise:e.exercises})).filter(Boolean))||[]},async addPendingExerciseToGroup(e,r){let{error:n}=await t.N.from("group_pending_exercises").insert([{group_id:e,exercise_id:r}]);n&&i(n,"Fout bij het toevoegen van wachtende oefening aan groep")},async removePendingExerciseFromGroup(e,r){let{error:n}=await t.N.from("group_pending_exercises").delete().eq("group_id",e).eq("exercise_id",r);n&&i(n,"Fout bij het verwijderen van wachtende oefening uit groep")}},l={async getAllSessions(){let{data:e,error:r}=await t.N.from("sessions").select("*").order("start_time",{ascending:!1});return r&&i(r,"Fout bij het ophalen van sessies"),e||[]},async getSessionsByGroup(e){let{data:r,error:n}=await t.N.from("sessions").select("*").eq("group_id",e).order("start_time",{ascending:!1});return n&&i(n,"Fout bij het ophalen van groepssessies"),r||[]},async createSession(e){let r={title:e.title,description:e.description||null,group_id:e.group_id,location_id:e.location_id||null,start_time:e.start_time,end_time:e.end_time,recurrence_type:e.recurrence_type||"none",recurrence_end_date:e.recurrence_end_date||null,parent_session_id:e.parent_session_id||null,created_by:e.created_by},{data:n,error:o}=await t.N.from("sessions").insert([r]).select().single();return o&&i(o,"Fout bij het aanmaken van sessie"),n},async createSessionWithTrainers(e,r){let n=e.recurrence_type||"none",{data:o,error:a}=await t.N.from("sessions").insert([{...e,recurrence_type:n,date:e.start_time.split("T")[0]}]).select().single();if(a&&i(a,"Fout bij het aanmaken van sessie"),r.length>0){let e=r.map(e=>({session_id:o.id,user_id:e})),{error:n}=await t.N.from("session_trainers").insert(e);n&&i(n,"Fout bij het toewijzen van trainers")}return"none"!==n&&e.recurrence_end_date&&await this.createRecurringSessions(o.id,{...o,start_time:e.start_time,end_time:e.end_time},n,new Date(e.start_time),new Date(e.recurrence_end_date),r),o},async createRecurringSessions(e,r,n,o,a,s){let l=[],c=new Date(o);for(c=this.addIntervalToDate(c,n);c<=a;){let t=c.toISOString(),o=new Date(c),i=new Date(r.start_time),a=new Date(r.end_time).getTime()-i.getTime();o.setTime(o.getTime()+a);let s=o.toISOString(),d=t.split("T")[0];l.push({title:r.title,description:r.description,group_id:r.group_id,date:d,start_time:t,end_time:s,location_id:r.location_id,parent_session_id:e,recurrence_type:n,created_by:r.created_by}),c=this.addIntervalToDate(c,n)}if(l.length>0){let{data:e,error:r}=await t.N.from("sessions").insert(l).select();if(r&&i(r,"Fout bij het aanmaken van herhalende sessies"),e&&e.length>0&&s.length>0){let r=[];e.forEach(e=>{s.forEach(n=>{r.push({session_id:e.id,user_id:n})})});let{error:n}=await t.N.from("session_trainers").insert(r);n&&i(n,"Fout bij het toewijzen van trainers aan herhalende sessies")}}},getRecurrenceInterval(e){switch(e){case"daily":return 1;case"weekly":return 7;case"biweekly":return 14;case"monthly":return 30;default:return 0}},addIntervalToDate(e,r){let n=new Date(e);switch(r){case"daily":n.setDate(n.getDate()+1);break;case"weekly":n.setDate(n.getDate()+7);break;case"biweekly":n.setDate(n.getDate()+14);break;case"monthly":n.setMonth(n.getMonth()+1)}return n},async getSessionsWithDetails(){let{data:e,error:r}=await t.N.from("sessions").select("\n        *,\n        groups (\n          id,\n          name\n        ),\n        locations (\n          id,\n          name,\n          address\n        ),\n        session_trainers (\n          users (\n            id,\n            name,\n            email\n          )\n        )\n      ").order("start_time",{ascending:!0});return r&&i(r,"Fout bij het ophalen van sessies"),e||[]}},c={async getAllExercises(){let{data:e,error:r}=await t.N.from("exercises").select("*");return r&&i(r,"Fout bij het ophalen van oefeningen"),e||[]},async createExercise(e){let{data:r,error:n}=await t.N.from("exercises").insert([e]).select().single();return n&&i(n,"Fout bij het aanmaken van oefening"),r},async completeExercise(e){let{data:r,error:n}=await t.N.from("completed_exercises").insert([{...e,completed_at:new Date().toISOString()}]).select().single();return n&&i(n,"Fout bij het registreren van oefening"),r}},d={async getAttendanceBySession(e){let{data:r,error:n}=await t.N.from("attendance").select("*").eq("session_id",e);return n&&i(n,"Fout bij het ophalen van aanwezigheid"),r||[]},async recordBulkAttendance(e,r,n){let o=r.map(r=>({session_id:e,member_id:r.memberId,present:"present"===r.status,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})),{error:a}=await t.N.from("attendance").upsert(o,{onConflict:"session_id,member_id"});a&&i(a,"Fout bij het opslaan van aanwezigheid")}},u=e=>{if(!e||0===e.trim().length)throw Error("Locatienaam is verplicht");if(e.length>100)throw Error("Locatienaam mag niet langer zijn dan 100 karakters")},g=e=>{if(e&&e.length>200)throw Error("Adres mag niet langer zijn dan 200 karakters")},p=e=>{if(e&&e.length>500)throw Error("Beschrijving mag niet langer zijn dan 500 karakters")},m={async getAllLocations(){let{data:e,error:r}=await t.N.from("locations").select("*").order("name");return r&&i(r,"Fout bij het ophalen van locaties"),e||[]},async getLocationById(e){let{data:r,error:n}=await t.N.from("locations").select("*").eq("id",e).single();if(n){if("PGRST116"===n.code)return null;i(n,"Fout bij het ophalen van locatie")}return r},async createLocation(e){u(e.name),g(e.address),p(e.description);let{data:r,error:n}=await t.N.from("locations").insert([e]).select().single();if(n){if("23505"===n.code)throw Error("Er bestaat al een locatie met deze naam");i(n,"Fout bij het aanmaken van locatie")}return r},async updateLocation(e,r){r.name&&u(r.name),r.address&&g(r.address),r.description&&p(r.description);let{data:n,error:o}=await t.N.from("locations").update(r).eq("id",e).select().single();if(o){if("23505"===o.code)throw Error("Er bestaat al een locatie met deze naam");i(o,"Fout bij het bijwerken van locatie")}return n},async deleteLocation(e){let{data:r,error:n}=await t.N.from("sessions").select("id").eq("location_id",e).limit(1);if(n&&i(n,"Fout bij controleren van sessies"),r&&r.length>0)throw Error("Deze locatie kan niet verwijderd worden omdat er nog sessies aan gekoppeld zijn");let{error:o}=await t.N.from("locations").delete().eq("id",e);o&&i(o,"Fout bij het verwijderen van locatie")}}},6927:(e,r,n)=>{n.d(r,{N:()=>s});var t=n(4982),o=n(9509);console.log("=== SUPABASE CLIENT INITIALIZATION ==="),console.log("All env vars:",Object.keys(o.env).filter(e=>e.startsWith("NEXT_PUBLIC_"))),console.log("NODE_ENV:","production");let i="https://tuqlyoimberycjtdkivm.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1cWx5b2ltYmVyeWNqdGRraXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjcwNTIsImV4cCI6MjA2NTkwMzA1Mn0.O1zFRbvkHq-1HMAHFXGU8uNVGcEgVCDESYWVbWwQZfI";if(console.log("NEXT_PUBLIC_SUPABASE_URL:",i?"SET ("+i.substring(0,20)+"...)":"MISSING"),console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:",a?"SET ("+a.substring(0,20)+"...)":"MISSING"),!i||!a)throw console.error("Supabase environment variables are missing!"),console.error("Current environment:","production"),console.error("NEXT_PUBLIC_SUPABASE_URL:",i?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",a?"Set":"Missing"),console.error("Please check your .env.local file to ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set."),console.error("Make sure to restart your development server after adding environment variables."),Error("Missing required environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Please set them in your .env.local file and restart the server.");if(i&&!i.startsWith("http"))throw console.error("Invalid Supabase URL format!"),Error("Supabase URL must start with http:// or https://");if(a&&(!a.startsWith("ey")||2!==(a.match(/\./g)||[]).length))throw console.error("Invalid Supabase API key format!"),console.error('API key should be a JWT token (start with "ey" and contain two periods)'),Error("Invalid Supabase API key format. Please check your .env.local file.");{let e=console.log,r=console.warn;console.log=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];let o=n.join(" ");o.includes("GoTrueClient")||o.includes("#_")||e.apply(console,n)},console.warn=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let o=n.join(" ");o.includes("GoTrueClient")||o.includes("#_")||r.apply(console,n)}}let s=(0,t.UU)(i,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,debug:!1},global:{headers:{"X-Client-Info":"bv-floriande-web"},fetch:async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new AbortController,t=setTimeout(()=>n.abort(),15e3);try{let o=await fetch(e,{...r,signal:n.signal,headers:{"Content-Type":"application/json",...r.headers}});return clearTimeout(t),o}catch(e){if(clearTimeout(t),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout - please check your internet connection");if(e instanceof TypeError&&e.message.includes("Failed to fetch"))throw Error("Network connection failed. Please check your internet connection and try again.");throw e}}},db:{schema:"public"}})},9434:(e,r,n)=>{n.d(r,{cn:()=>i});var t=n(2596),o=n(9688);function i(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,o.QP)((0,t.$)(r))}}}]);